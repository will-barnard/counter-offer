<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter Offer Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: visible;
        }
        
        .header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .content {
            padding: 30px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }
        
        input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #10b981;
        }
        
        .county-search {
            position: relative;
        }
        
        .county-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #10b981;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 9999;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .county-item {
            padding: 10px 12px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 14px;
        }
        
        .county-item:hover {
            background: #f5f5f5;
        }
        
        .county-item strong {
            color: #10b981;
        }
        
        .tax-info {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .tax-info strong {
            color: #10b981;
        }
        
        .calculations {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .calculations h3 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .calc-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }
        
        .calc-row:last-child {
            border-bottom: none;
            font-weight: 600;
            color: #10b981;
            font-size: 16px;
        }
        
        .output-box {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .output-box h3 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .output-text {
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 14px;
            color: #333;
            background: white;
            padding: 15px;
            border-radius: 4px;
        }
        
        .copy-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s;
        }
        
        .copy-btn:hover {
            background: #059669;
        }
        
        .copy-btn.copied {
            background: #059669;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>üí∞ Counter Offer Calculator</h1>
            </div>
            
            <div class="content">
                <div class="warning">
                    <strong>Note:</strong> This tool uses sample tax rates. Consider verifying with official sources for accuracy.
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Customer Name</label>
                        <input 
                            v-model="customerName" 
                            type="text" 
                            placeholder="Enter customer name"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label>Customer Offer ($)</label>
                        <input 
                            v-model.number="customerOffer" 
                            type="number" 
                            step="0.01"
                            placeholder="0.00"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label>Original Shipping Cost ($)</label>
                        <input 
                            v-model.number="shippingCost" 
                            type="number" 
                            step="0.01"
                            placeholder="0.00"
                        >
                    </div>
                    
                    <div class="form-group county-search">
                        <label>US County</label>
                        <input 
                            v-model="countySearch" 
                            type="text" 
                            placeholder="Start typing county name..."
                            @focus="showDropdown = true"
                            @blur="hideDropdown"
                        >
                        <div v-if="showDropdown && filteredCounties.length" class="county-dropdown">
                            <div 
                                v-for="county in filteredCounties" 
                                :key="county.id"
                                class="county-item"
                                @mousedown="selectCounty(county)"
                            >
                                <strong>{{ county.name }}</strong>, {{ county.state }} - {{ (county.taxRate * 100).toFixed(2) }}%
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Shop Offer ($)</label>
                        <input 
                            v-model.number="shopOffer" 
                            type="number" 
                            step="0.01"
                            placeholder="0.00"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label>Shipping Offer ($)</label>
                        <input 
                            v-model.number="shippingOffer" 
                            type="number" 
                            step="0.01"
                            placeholder="0.00"
                        >
                    </div>
                </div>
                
                <div v-if="selectedCounty" class="tax-info">
                    üìç <strong>{{ selectedCounty.name }}, {{ selectedCounty.state }}</strong> - Sales Tax Rate: <strong>{{ (selectedCounty.taxRate * 100).toFixed(2) }}%</strong>
                </div>
                
                <div v-if="isFormComplete" class="calculations">
                    <h3>üìä Calculations</h3>
                    <div class="calc-row">
                        <span>Customer Offer:</span>
                        <span>${{ customerOffer.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Calculated County Tax:</span>
                        <span>${{ calculatedTax.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Total with Tax:</span>
                        <span>${{ totalWithTax.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Original Shipping:</span>
                        <span>${{ shippingCost.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Total Reverb Cost:</span>
                        <span>${{ totalReverbCost.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Your Offer (Shop + Shipping):</span>
                        <span>${{ totalShopOffer.toFixed(2) }}</span>
                    </div>
                    <div class="calc-row">
                        <span>Customer Savings:</span>
                        <span>${{ customerSavings.toFixed(2) }}</span>
                    </div>
                </div>
                
                <div v-if="isFormComplete" class="output-box">
                    <h3>üìß Copy Message</h3>
                    <div class="output-text">{{ outputMessage }}</div>
                    <button @click="copyToClipboard" class="copy-btn" :class="{ copied: copied }">
                        {{ copied ? '‚úì Copied!' : 'üìã Copy to Clipboard' }}
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    customerName: '',
                    customerOffer: 0,
                    shippingCost: 0,
                    countySearch: '',
                    shopOffer: 0,
                    shippingOffer: 0,
                    selectedCounty: null,
                    showDropdown: false,
                    copied: false,
                    
                    // Sample county tax data - expand this with more counties or integrate with a real API
                    counties: [
                        { id: 1, name: 'Cook County', state: 'IL', taxRate: 0.1025 },
                        { id: 2, name: 'Lake County', state: 'IL', taxRate: 0.0875 },
                        { id: 3, name: 'DuPage County', state: 'IL', taxRate: 0.0750 },
                        { id: 4, name: 'Los Angeles County', state: 'CA', taxRate: 0.0950 },
                        { id: 5, name: 'San Diego County', state: 'CA', taxRate: 0.0775 },
                        { id: 6, name: 'Orange County', state: 'CA', taxRate: 0.0775 },
                        { id: 7, name: 'King County', state: 'WA', taxRate: 0.1010 },
                        { id: 8, name: 'Maricopa County', state: 'AZ', taxRate: 0.0830 },
                        { id: 9, name: 'Harris County', state: 'TX', taxRate: 0.0825 },
                        { id: 10, name: 'Dallas County', state: 'TX', taxRate: 0.0825 },
                        { id: 11, name: 'Miami-Dade County', state: 'FL', taxRate: 0.0700 },
                        { id: 12, name: 'New York County', state: 'NY', taxRate: 0.0875 },
                        { id: 13, name: 'Kings County', state: 'NY', taxRate: 0.0875 },
                        { id: 14, name: 'Fulton County', state: 'GA', taxRate: 0.0890 },
                        { id: 15, name: 'Wayne County', state: 'MI', taxRate: 0.0600 },
                        { id: 16, name: 'Suffolk County', state: 'MA', taxRate: 0.0625 },
                        { id: 17, name: 'Middlesex County', state: 'MA', taxRate: 0.0625 },
                        { id: 18, name: 'Philadelphia County', state: 'PA', taxRate: 0.0800 },
                        { id: 19, name: 'Allegheny County', state: 'PA', taxRate: 0.0700 },
                        { id: 20, name: 'Denver County', state: 'CO', taxRate: 0.0865 },
                    ]
                };
            },
            
            computed: {
                filteredCounties() {
                    if (!this.countySearch) return this.counties;
                    const search = this.countySearch.toLowerCase();
                    return this.counties.filter(county => 
                        county.name.toLowerCase().includes(search) || 
                        county.state.toLowerCase().includes(search)
                    );
                },
                
                calculatedTax() {
                    if (!this.selectedCounty) return 0;
                    return this.customerOffer * this.selectedCounty.taxRate;
                },
                
                totalWithTax() {
                    return this.customerOffer + this.calculatedTax;
                },
                
                totalReverbCost() {
                    return this.totalWithTax + this.shippingCost;
                },
                
                totalShopOffer() {
                    return this.shopOffer + this.shippingOffer;
                },
                
                customerSavings() {
                    return this.totalReverbCost - this.totalShopOffer;
                },
                
                isFormComplete() {
                    return this.customerName && 
                           this.customerOffer > 0 && 
                           this.shippingCost >= 0 && 
                           this.selectedCounty && 
                           this.shopOffer > 0 && 
                           this.shippingOffer >= 0;
                },
                
                outputMessage() {
                    if (!this.isFormComplete) return '';
                    
                    return `Hi ${this.customerName},

Thanks for reaching out directly, much appreciated!

We accept all forms of payment, but would you be great if you were able to pay by Zelle or Venmo? The sales tax Reverb would automatically charge you had we accepted your offer through Reverb would've added $${this.calculatedTax.toFixed(2)} to your offer price making it $${this.totalWithTax.toFixed(2)} + $${this.shippingCost.toFixed(2)} shipping.

We can do $${this.shopOffer.toFixed(2)} + $${this.shippingOffer.toFixed(2)} shipping, which winds up being $${this.customerSavings.toFixed(2)} less than if we accepted your Reverb offer.

Give me a ring and we can get things rolling for you.

Sincerely, Johnny
847-344-0520`;
                }
            },
            
            methods: {
                selectCounty(county) {
                    this.selectedCounty = county;
                    this.countySearch = `${county.name}, ${county.state}`;
                    this.showDropdown = false;
                },
                
                hideDropdown() {
                    setTimeout(() => {
                        this.showDropdown = false;
                    }, 200);
                },
                
                async copyToClipboard() {
                    try {
                        await navigator.clipboard.writeText(this.outputMessage);
                        this.copied = true;
                        setTimeout(() => {
                            this.copied = false;
                        }, 2000);
                    } catch (err) {
                        alert('Failed to copy to clipboard');
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>